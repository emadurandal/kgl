parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"q3Og":[function(require,module,exports) {
"use strict";function t(){this.create=function(){return new Float32Array(16)},this.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},this.multiply=function(t,r,n){var i=t[0],e=t[1],s=t[2],a=t[3],u=t[4],h=t[5],o=t[6],c=t[7],f=t[8],l=t[9],v=t[10],M=t[11],p=t[12],y=t[13],d=t[14],q=t[15],I=r[0],m=r[1],x=r[2],w=r[3],A=r[4],V=r[5],b=r[6],F=r[7],P=r[8],_=r[9],j=r[10],k=r[11],z=r[12],O=r[13],g=r[14],B=r[15];return n[0]=I*i+m*u+x*f+w*p,n[1]=I*e+m*h+x*l+w*y,n[2]=I*s+m*o+x*v+w*d,n[3]=I*a+m*c+x*M+w*q,n[4]=A*i+V*u+b*f+F*p,n[5]=A*e+V*h+b*l+F*y,n[6]=A*s+V*o+b*v+F*d,n[7]=A*a+V*c+b*M+F*q,n[8]=P*i+_*u+j*f+k*p,n[9]=P*e+_*h+j*l+k*y,n[10]=P*s+_*o+j*v+k*d,n[11]=P*a+_*c+j*M+k*q,n[12]=z*i+O*u+g*f+B*p,n[13]=z*e+O*h+g*l+B*y,n[14]=z*s+O*o+g*v+B*d,n[15]=z*a+O*c+g*M+B*q,n},this.scale=function(t,r,n){return n[0]=t[0]*r[0],n[1]=t[1]*r[0],n[2]=t[2]*r[0],n[3]=t[3]*r[0],n[4]=t[4]*r[1],n[5]=t[5]*r[1],n[6]=t[6]*r[1],n[7]=t[7]*r[1],n[8]=t[8]*r[2],n[9]=t[9]*r[2],n[10]=t[10]*r[2],n[11]=t[11]*r[2],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},this.translate=function(t,r,n){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[0]*r[0]+t[4]*r[1]+t[8]*r[2]+t[12],n[13]=t[1]*r[0]+t[5]*r[1]+t[9]*r[2]+t[13],n[14]=t[2]*r[0]+t[6]*r[1]+t[10]*r[2]+t[14],n[15]=t[3]*r[0]+t[7]*r[1]+t[11]*r[2]+t[15],n},this.rotate=function(t,r,n,i){var e=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);if(!e)return null;var s=n[0],a=n[1],u=n[2];1!=e&&(s*=e=1/e,a*=e,u*=e);var h=Math.sin(r),o=Math.cos(r),c=1-o,f=t[0],l=t[1],v=t[2],M=t[3],p=t[4],y=t[5],d=t[6],q=t[7],I=t[8],m=t[9],x=t[10],w=t[11],A=s*s*c+o,V=a*s*c+u*h,b=u*s*c-a*h,F=s*a*c-u*h,P=a*a*c+o,_=u*a*c+s*h,j=s*u*c+a*h,k=a*u*c-s*h,z=u*u*c+o;return r?t!=i&&(i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]):i=t,i[0]=f*A+p*V+I*b,i[1]=l*A+y*V+m*b,i[2]=v*A+d*V+x*b,i[3]=M*A+q*V+w*b,i[4]=f*F+p*P+I*_,i[5]=l*F+y*P+m*_,i[6]=v*F+d*P+x*_,i[7]=M*F+q*P+w*_,i[8]=f*j+p*k+I*z,i[9]=l*j+y*k+m*z,i[10]=v*j+d*k+x*z,i[11]=M*j+q*k+w*z,i},this.lookAt=function(t,r,n,i){var e,s,a,u,h,o,c,f,l,v,M=t[0],p=t[1],y=t[2],d=n[0],q=n[1],I=n[2],m=r[0],x=r[1],w=r[2];return M==m&&p==x&&y==w?this.identity(i):(c=M-r[0],f=p-r[1],l=y-r[2],e=q*(l*=v=1/Math.sqrt(c*c+f*f+l*l))-I*(f*=v),s=I*(c*=v)-d*l,a=d*f-q*c,(v=Math.sqrt(e*e+s*s+a*a))?(e*=v=1/v,s*=v,a*=v):(e=0,s=0,a=0),u=f*a-l*s,h=l*e-c*a,o=c*s-f*e,(v=Math.sqrt(u*u+h*h+o*o))?(u*=v=1/v,h*=v,o*=v):(u=0,h=0,o=0),i[0]=e,i[1]=u,i[2]=c,i[3]=0,i[4]=s,i[5]=h,i[6]=f,i[7]=0,i[8]=a,i[9]=o,i[10]=l,i[11]=0,i[12]=-(e*M+s*p+a*y),i[13]=-(u*M+h*p+o*y),i[14]=-(c*M+f*p+l*y),i[15]=1,i)},this.perspective=function(t,r,n,i,e){var s=n*Math.tan(t*Math.PI/360),a=2*(s*r),u=2*s,h=i-n;return e[0]=2*n/a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*n/u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=-(i+n)/h,e[11]=-1,e[12]=0,e[13]=0,e[14]=-i*n*2/h,e[15]=0,e},this.ortho=function(t,r,n,i,e,s,a){var u=r-t,h=n-i,o=s-e;return a[0]=2/u,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/h,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=-2/o,a[11]=0,a[12]=-(t+r)/u,a[13]=-(n+i)/h,a[14]=-(s+e)/o,a[15]=1,a},this.transpose=function(t,r){return r[0]=t[0],r[1]=t[4],r[2]=t[8],r[3]=t[12],r[4]=t[1],r[5]=t[5],r[6]=t[9],r[7]=t[13],r[8]=t[2],r[9]=t[6],r[10]=t[10],r[11]=t[14],r[12]=t[3],r[13]=t[7],r[14]=t[11],r[15]=t[15],r},this.inverse=function(t,r){var n=t[0],i=t[1],e=t[2],s=t[3],a=t[4],u=t[5],h=t[6],o=t[7],c=t[8],f=t[9],l=t[10],v=t[11],M=t[12],p=t[13],y=t[14],d=t[15],q=n*u-i*a,I=n*h-e*a,m=n*o-s*a,x=i*h-e*u,w=i*o-s*u,A=e*o-s*h,V=c*p-f*M,b=c*y-l*M,F=c*d-v*M,P=f*y-l*p,_=f*d-v*p,j=l*d-v*y,k=1/(q*j-I*_+m*P+x*F-w*b+A*V);return r[0]=(u*j-h*_+o*P)*k,r[1]=(-i*j+e*_-s*P)*k,r[2]=(p*A-y*w+d*x)*k,r[3]=(-f*A+l*w-v*x)*k,r[4]=(-a*j+h*F-o*b)*k,r[5]=(n*j-e*F+s*b)*k,r[6]=(-M*A+y*m-d*I)*k,r[7]=(c*A-l*m+v*I)*k,r[8]=(a*_-u*F+o*V)*k,r[9]=(-n*_+i*F-s*V)*k,r[10]=(M*w-p*m+d*q)*k,r[11]=(-c*w+f*m-v*q)*k,r[12]=(-a*P+u*b-h*V)*k,r[13]=(n*P-i*b+e*V)*k,r[14]=(-M*x+p*I-y*q)*k,r[15]=(c*x-f*I+l*q)*k,r}}function r(){this.create=function(){return new Float32Array(4)},this.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},this.inverse=function(t,r){return r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r[3]=t[3],r},this.normalize=function(t){var r=t[0],n=t[1],i=t[2],e=t[3],s=Math.sqrt(r*r+n*n+i*i+e*e);return 0===s?(t[0]=0,t[1]=0,t[2]=0,t[3]=0):(s=1/s,t[0]=r*s,t[1]=n*s,t[2]=i*s,t[3]=e*s),t},this.multiply=function(t,r,n){var i=t[0],e=t[1],s=t[2],a=t[3],u=r[0],h=r[1],o=r[2],c=r[3];return n[0]=i*c+a*u+e*o-s*h,n[1]=e*c+a*h+s*u-i*o,n[2]=s*c+a*o+i*h-e*u,n[3]=a*c-i*u-e*h-s*o,n},this.rotate=function(t,r,n){var i=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);if(!i)return null;var e=r[0],s=r[1],a=r[2];1!=i&&(e*=i=1/i,s*=i,a*=i);var u=Math.sin(.5*t);return n[0]=e*u,n[1]=s*u,n[2]=a*u,n[3]=Math.cos(.5*t),n},this.toVecIII=function(t,r,n){var i=this.create(),e=this.create(),s=this.create();return this.inverse(r,s),i[0]=t[0],i[1]=t[1],i[2]=t[2],this.multiply(s,i,e),this.multiply(e,r,s),n[0]=s[0],n[1]=s[1],n[2]=s[2],n},this.toMatIV=function(t,r){var n=t[0],i=t[1],e=t[2],s=t[3],a=n+n,u=i+i,h=e+e,o=n*a,c=n*u,f=n*h,l=i*u,v=i*h,M=e*h,p=s*a,y=s*u,d=s*h;return r[0]=1-(l+M),r[1]=c-d,r[2]=f+y,r[3]=0,r[4]=c+d,r[5]=1-(o+M),r[6]=v-p,r[7]=0,r[8]=f-y,r[9]=v+p,r[10]=1-(o+l),r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},this.slerp=function(t,r,n,i){var e=t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3],s=1-e*e;if(s<=0)i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3];else if(s=Math.sqrt(s),Math.abs(s)<1e-4)i[0]=.5*t[0]+.5*r[0],i[1]=.5*t[1]+.5*r[1],i[2]=.5*t[2]+.5*r[2],i[3]=.5*t[3]+.5*r[3];else{var a=Math.acos(e),u=a*n,h=Math.sin(a-u)/s,o=Math.sin(u)/s;i[0]=t[0]*h+r[0]*o,i[1]=t[1]*h+r[1]*o,i[2]=t[2]*h+r[2]*o,i[3]=t[3]*h+r[3]*o}return i}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.qtnIV=r,exports.default=void 0;var n=new t;exports.default=n;
},{}],"XCtE":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a="attribute vec2 position;void main(){gl_Position=vec4(position,0.,1.);}",s={position:{value:[-1,1,-1,-1,1,1,1,-1],size:2}},n=function(){function i(e,r){t(this,i),this.attributes={},this.uniforms={},this.textureIndexes={};var s=e.gl;this.webgl=e;var n=r.vertexShaderId,o=r.vertexShader,c=void 0===o?n?document.getElementById(n).textContent:a:o,u=r.fragmentShaderId,l=r.fragmentShader,h=void 0===l?document.getElementById(u).textContent:l,d=r.attributes,f=r.instancedAttributes,b=r.uniforms,E=r.mode,g=r.drawType,A=void 0===g?"STATIC_DRAW":g,v=r.isTransparent,T=void 0!==v&&v,m=r.isAdditive,R=void 0!==m&&m,y=r.isFloats,_=void 0!==y&&y,x=r.isCulling,S=void 0===x||x,C=r.isDepth,I=void 0!==C&&C,p=r.clearedColor,L=!_,w=r.isAutoResolution,U=void 0===w?(!b||!b.resolution)&&L:w,F=r.hasCamera,D=void 0===F?L:F,k=r.hasLight,N=void 0===k?L:k,B=r.isClear,P=void 0===B?L:B,M=!(r.vertexShaderId||r.vertexShader);if(this.mode=E,this.glMode=s[E||"TRIANGLE_STRIP"],this.drawType=A,this.isTransparent=T,this.isAdditive=R,this.isAutoResolution=U,this.hasCamera=D,this.hasLight=N,this.isClear=P,this.isCulling=S,this.isDepth=I,this.isInstanced=f,this.clearedColor=p||[0,0,0,0],this.createProgram(c,h),this.use(),M)this.createWholeAttribute();else if(d&&(this.createAttribute(d),this.isInstanced)){if(this.instancedArraysExt=s.getExtension("ANGLE_instanced_arrays"),null==this.instancedArraysExt)return void alert("ANGLE_instanced_arrays not supported");this.createAttribute(f,!0)}b&&this.createUniform(b)}return r(i,[{key:"createProgram",value:function(e,t){var i=this.webgl.gl,r=i.createProgram();i.attachShader(r,this.createShader("VERTEX_SHADER",e)),i.attachShader(r,this.createShader("FRAGMENT_SHADER",t)),i.linkProgram(r),i.getProgramParameter(r,i.LINK_STATUS)?r?this.program=r:console.error('Failed to create program "'.concat(key,'".')):console.error(i.getProgramInfoLog(r))}},{key:"createShader",value:function(e,t){var i=this.webgl.gl,r=i.createShader(i[e]);if(i.shaderSource(r,t),i.compileShader(r),i.getShaderParameter(r,i.COMPILE_STATUS))return r;console.error(i.getShaderInfoLog(r))}},{key:"createAttribute",value:function(e,t){var i=this;Object.keys(e).forEach(function(r){var a=e[r],s=a.value,n=a.size,o=a.isIndices;i.addAttribute(r,s,n,o,t)})}},{key:"addAttribute",value:function(e,t,i,r,a){var s=this.webgl.gl,n=s.getAttribLocation(this.program,e),o=this.attributes[e]={location:n,size:i,isInstanced:a};if(r){var c=s.createBuffer();s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,c),s.bufferData(s.ELEMENT_ARRAY_BUFFER,new Int16Array(t),s[this.drawType]),o.ibo=c,this.indicesCount=this.indicesCount||t.length,this.glMode=s[this.mode||"TRIANGLES"]}else{var u=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,u),s.bufferData(s.ARRAY_BUFFER,new Float32Array(t),s[this.drawType]),o.vbo=u,a&&(this.instanceCount=this.instanceCount||t.length/i),this.count=this.count||t.length/i}}},{key:"setAttribute",value:function(e){var t=this.webgl.gl,i=this.attributes[e],r=i.location,a=i.size,s=i.vbo,n=i.ibo,o=i.isInstanced;n?t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n):(t.bindBuffer(t.ARRAY_BUFFER,s),t.enableVertexAttribArray(r),t.vertexAttribPointer(r,a,t.FLOAT,!1,0,0),o&&this.instancedArraysExt.vertexAttribDivisorANGLE(r,1))}},{key:"updateAttribute",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.webgl.gl;r.bindBuffer(r.ARRAY_BUFFER,this.attributes[e].vbo),r.bufferSubData(r.ARRAY_BUFFER,i,new Float32Array(t))}},{key:"createWholeAttribute",value:function(){this.createAttribute(s)}},{key:"createUniform",value:function(e){var t=this,i=Object.assign({},e);this.isAutoResolution&&!i.resolution&&(i.resolution=[1,1]),this.hasCamera&&(i.mvpMatrix=new Float32Array(16),i.invMatrix=new Float32Array(16)),this.hasLight&&(i.lightDirection||(i.lightDirection=[0,0,0]),i.eyeDirection||(i.eyeDirection=[0,0,0]),i.ambientColor||(i.ambientColor=[.1,.1,.1])),Object.keys(i).forEach(function(e){t.addUniform(e,i[e])})}},{key:"addUniform",value:function(t,i){var r,a,s=this,n=i,o=function(e,i){switch(e){case"image":r="image",a="1i",n=s.createTexture(t,i);break;case"framebuffer":r="framebuffer",a="1i",n=i;break;default:a=e,n=i}};switch(e(i)){case"number":a="1f";break;case"boolean":a="1i";break;case"string":o(i);break;case"object":switch(i.constructor.name){case"Float32Array":case"Array":switch(i.length){case 16:r="matrix",a="Matrix4fv";break;default:a="".concat(i.length,"fv")}break;case"HTMLImageElement":case"HTMLVideoElement":case"HTMLCanvasElement":a="1i",n=this.createTexture(t,i);break;case"Object":o(i.type,i.value)}}if(a){var c,u=this.webgl.gl.getUniformLocation(this.program,t),l="uniform".concat(a);switch(r){case"image":c=function(e){s.webgl.gl[l](u,s.textureIndexes[e]),n=e};break;case"framebuffer":c=function(e){s.webgl.gl[l](u,s.webgl.framebuffers[e].textureIndex),n=e};break;case"matrix":c=function(e){s.webgl.gl[l](u,!1,e),n=e};break;default:c=function(e){s.webgl.gl[l](u,e),n=e}}Object.defineProperty(this.uniforms,t,{get:function(){return n},set:c}),void 0!==n&&(this.uniforms[t]=n)}else console.error('Failed to add uniform "'.concat(t,'".'))}},{key:"createTexture",value:function(e,t){if(t){var i=this.webgl.gl,r=i.createTexture(),a=this.textureIndexes[e]=++this.webgl.textureIndex;return i.activeTexture(i["TEXTURE".concat(a)]),i.bindTexture(i.TEXTURE_2D,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t),a}}},{key:"updateTexture",value:function(e,t){var i=this.webgl.gl;i.activeTexture(i["TEXTURE".concat(this.textureIndexes[e])]),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t)}},{key:"use",value:function(){this.webgl.gl.useProgram(this.program)}},{key:"draw",value:function(e){var t=this.webgl.gl;if(this.use(),this.isClear&&(t.clearColor(this.clearedColor[0],this.clearedColor[1],this.clearedColor[2],this.clearedColor[3]),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)),this.isTransparent?(t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)):this.isAdditive?(t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE,t.ONE,t.ONE)):t.disable(t.BLEND),this.isCulling?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.isDepth?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),e)for(var i=Object.keys(e),r=0;r<i.length;r++){var a=i[r];this.uniforms[a]=e[a]}for(var s=Object.keys(this.attributes),n=0;n<s.length;n++)this.setAttribute(s[n]);this.isInstanced?this.indicesCount?this.instancedArraysExt.drawElementsInstancedANGLE(this.glMode,this.indicesCount,t.UNSIGNED_SHORT,0,this.instanceCount):this.instancedArraysExt.drawArraysInstancedANGLE(this.glMode,0,this.count,this.instanceCount):this.indicesCount?t.drawElements(this.glMode,this.indicesCount,t.UNSIGNED_SHORT,0):t.drawArrays(this.glMode,0,this.count)}}]),i}();exports.default=n;
},{}],"gGhW":[function(require,module,exports) {
module.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform vec2 resolution;\nuniform sampler2D texture;\n\nvoid main() {\n  gl_FragColor = texture2D(texture, gl_FragCoord.st / resolution);\n}\n";
},{}],"f5B0":[function(require,module,exports) {
module.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform vec2 resolution;\nuniform float radius;\nuniform bool isHorizontal;\n\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvoid main () {\n  vec2 uv = gl_FragCoord.xy / resolution;\n  vec2 direction = isHorizontal ? vec2(1., 0.) : vec2(0., 1.);\n  direction *= radius;\n  gl_FragColor = blur9(texture, uv, resolution, direction);\n}\n";
},{}],"aPJu":[function(require,module,exports) {
module.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform vec2 resolution;\nuniform sampler2D texture;\nuniform float threshold;\n\nvoid main() {\n  vec2 uv = gl_FragCoord.st / resolution;\n  vec4 color = texture2D(texture, uv);\n  if (color.a == 0. || length(color.rgb) < threshold * 1.732) discard;\n  gl_FragColor = color;\n}\n";
},{}],"iAUv":[function(require,module,exports) {
module.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform vec2 resolution;\nuniform sampler2D specular;\n\nconst float brightness = 0.7;\nconst float spread = 0.3;\n\nvoid main() {\n  vec2 uv = gl_FragCoord.st / resolution;\n  vec4 specularColor = texture2D(specular, uv);\n  specularColor.rgb = pow(specularColor.rgb, vec3(1. - brightness));\n  specularColor.a = pow(specularColor.a, 1. - spread);\n  gl_FragColor = specularColor;\n  // gl_FragColor = vec4(vec3(specularColor.a), 1.); // * debug\n  // gl_FragColor = vec4(texture2D(specular, uv).rgb, 1.); // * debug\n}\n";
},{}],"KuNS":[function(require,module,exports) {
module.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform vec2 resolution;\nuniform float strength;\nuniform vec2 center;\n\nhighp float random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt= dot(co.xy ,vec2(a,b));\n    highp float sn= mod(dt,3.14);\n    return fract(sin(sn) * c);\n}\n\nconst float nFrag = 1. / 30.;\n\nvoid main () {\n  vec2 tFrag = 1. / resolution;\n  vec3 destColor = vec3(0.);\n  float randomValue = random(vec2(12.9898, 78.233));\n  vec2 fc = gl_FragCoord.st;\n  vec2 fcc = fc - center;\n  float totalWeight = 0.;\n\n  for (float i = 0.; i <= 30.; i++) {\n    float percent = (i + randomValue) * nFrag;\n    float weight = percent - percent * percent;\n    vec2 t = fc - fcc * percent * strength * nFrag;\n    destColor += texture2D(texture, t * tFrag).rgb * weight;\n    totalWeight += weight;\n  }\n  gl_FragColor = vec4(destColor / totalWeight, 1.);\n}\n";
},{}],"avE6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GodrayLight=exports.Godray=exports.Zoomblur=exports.Bloom=exports.Blur=void 0;var e=a(require("./program")),r=a(require("./shaders/template/texture.frag")),t=a(require("./shaders/postprocessing/blur.frag")),o=a(require("./shaders/postprocessing/specular.frag")),s=a(require("./shaders/postprocessing/bloom.frag")),u=a(require("./shaders/postprocessing/zoomblur.frag"));function a(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}function c(e,r){return!r||"object"!==f(r)&&"function"!=typeof r?d(e):r}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,r,t){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,r,t){var o=b(e,r);if(o){var s=Object.getOwnPropertyDescriptor(o,r);return s.get?s.get.call(t):s.value}})(e,r,t||e)}function b(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&null!==(e=p(e)););return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&g(e,r)}function g(e,r){return(g=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var y=function(r){function o(e){var r;i(this,o);var s={fragmentShader:t.default,uniforms:{texture:"framebuffer",radius:0,isHorizontal:!1},hasCamera:!1,hasLight:!1};return(r=c(this,p(o).call(this,e,s))).radius=.5,r}return m(o,e.default),l(o,[{key:"draw",value:function(e,r,t,s){this.use();for(var u=0;u<8;u++){this.webgl.bindFramebuffer(s&&u>=7?null:r),this.uniforms.texture=e,this.uniforms.radius=(7-u)*(void 0!==t?t:this.radius),this.uniforms.isHorizontal=u%2==0,h(p(o.prototype),"draw",this).call(this);var a=r;r=e,e=a}}}]),o}();exports.Blur=y;var w=function(r){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var s=r.threshold,u=void 0===s?.5:s,a={fragmentShader:o.default,uniforms:{texture:"framebuffer",threshold:u}};return c(this,p(t).call(this,e,a))}return m(t,e.default),l(t,[{key:"draw",value:function(e,r,o){this.webgl.bindFramebuffer(r),this.use(),this.uniforms.texture=e,void 0!==o&&(this.uniforms.threshold=o),h(p(t.prototype),"draw",this).call(this)}}]),t}(),v=function(t){function o(t){var u;i(this,o),t.effects.bloomSpecular||(t.effects.bloomSpecular=new w(t,{threshold:.3})),t.effects.bloomBlur||(t.effects.bloomBlur=new y(t)),t.effects.bloomBase||(t.effects.bloomBase=new e.default(t,{fragmentShader:r.default,uniforms:{texture:"framebuffer"}}));var a={fragmentShader:s.default,uniforms:{specular:"framebuffer"},isAdditive:!0,isClear:!1};return(u=c(this,p(o).call(this,t,a))).radius=.4,u}return m(o,e.default),l(o,[{key:"draw",value:function(e,r,t,s,u){this.webgl.effects.bloomSpecular.draw(e,r),this.webgl.effects.bloomBlur.draw(r,t,void 0!==s?s:this.radius),this.webgl.bindFramebuffer(u?null:t);var a=this.webgl.effects.bloomBase;a.use(),a.uniforms.texture=e,a.draw(),this.use(),this.uniforms.specular=r,h(p(o.prototype),"draw",this).call(this)}}]),o}();exports.Bloom=v;var x=function(r){function t(e){i(this,t);var r={fragmentShader:u.default,uniforms:{texture:"framebuffer",strength:5,center:[e.canvas.width/2,e.canvas.height/2]}};return c(this,p(t).call(this,e,r))}return m(t,e.default),l(t,[{key:"draw",value:function(e,r,o,s,u){this.webgl.bindFramebuffer(u?null:r),this.use(),this.uniforms.texture=e,void 0!==o&&(this.uniforms.strength=o),void 0!==s&&(this.uniforms.center=s),h(p(t.prototype),"draw",this).call(this)}}]),t}();exports.Zoomblur=x;var S=function(t){function o(t){var s;i(this,o),t.effects.godraySpecular||(t.effects.godraySpecular=new w(t,{threshold:.75})),t.effects.godrayZoomblur||(t.effects.godrayZoomblur=new x(t)),t.effects.godrayBlur||(t.effects.godrayBlur=new y(t)),t.effects.godrayBase||(t.effects.godrayBase=new e.default(t,{fragmentShader:r.default,uniforms:{texture:"framebuffer"}}));var u={fragmentShader:r.default,uniforms:{texture:"framebuffer"},isAdditive:!0,isClear:!1};return(s=c(this,p(o).call(this,t,u))).radius=.02,s}return m(o,e.default),l(o,[{key:"draw",value:function(e,r,t,s,u,a,f){this.webgl.effects.godraySpecular.draw(e,t),this.webgl.effects.godrayZoomblur.draw(t,r,s,u),this.webgl.effects.godrayBlur.draw(r,t,void 0!==a?a:this.radius),this.webgl.bindFramebuffer(f?null:t);var i=this.webgl.effects.godrayBase;i.use(),i.uniforms.texture=e,i.draw(),this.use(),this.uniforms.texture=r,h(p(o.prototype),"draw",this).call(this)}}]),o}();exports.Godray=S;var B=function(t){function o(e){var t;i(this,o),e.effects.godraySpecular||(e.effects.godraySpecular=new w(e,{threshold:.75})),e.effects.godrayZoomblur||(e.effects.godrayZoomblur=new x(e)),e.effects.godrayBlur||(e.effects.godrayBlur=new y(e));var s={fragmentShader:r.default,uniforms:{texture:"framebuffer"},isAdditive:!0,isClear:!1};return(t=c(this,p(o).call(this,e,s))).radius=.02,t}return m(o,e.default),l(o,[{key:"draw",value:function(e,r,t,s,u,a,f){this.webgl.effects.godraySpecular.draw(e,t),this.webgl.effects.godrayZoomblur.draw(t,r,s,u),this.webgl.effects.godrayBlur.draw(r,t,void 0!==a?a:this.radius),this.webgl.bindFramebuffer(f?null:t),this.use(),this.uniforms.texture=r,h(p(o.prototype),"draw",this).call(this)}}]),o}();exports.GodrayLight=B;
},{"./program":"XCtE","./shaders/template/texture.frag":"gGhW","./shaders/postprocessing/blur.frag":"f5B0","./shaders/postprocessing/specular.frag":"aPJu","./shaders/postprocessing/bloom.frag":"iAUv","./shaders/postprocessing/zoomblur.frag":"KuNS"}],"uBxZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./minMatrix.js")),t=n(require("./program")),r=a(require("./effects"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=a?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}var c=function(){function i(t){var r=this;o(this,i),this.programs={},this.effects={},this.framebuffers={},this.textureIndex=-1,this.ticks=[],this.mMatrix=e.default.identity(e.default.create()),this.vMatrix=e.default.identity(e.default.create()),this.pMatrix=e.default.identity(e.default.create()),this.vpMatrix=e.default.identity(e.default.create()),this.mvpMatrix=e.default.identity(e.default.create()),this.invMatrix=e.default.identity(e.default.create());var a=t.canvas,n=t.fov,s=void 0===n?50:n,f=t.near,u=void 0===f?.1:f,c=t.far,h=void 0===c?2e3:c,l=t.cameraPosition,E=void 0===l?[0,0,30]:l,d=t.cameraRotation,v=void 0===d?[0,0]:d,m=t.lightDirection,R=void 0===m?[-1,1,1]:m,T=t.eyeDirection,b=void 0===T?E:T,F=t.ambientColor,p=void 0===F?[.1,.1,.1]:F,y=t.isClear,_=void 0===y||y,g=t.clearedColor,x=t.programs,A=void 0===x?{}:x,D=t.effects,U=void 0===D?[]:D,M=t.framebuffers,P=void 0===M?[]:M,C=t.framebufferFloats,O=void 0===C?{}:C,k=t.tick,B=t.onBefore,I=t.onResize,S=t.isAutoStart,X=void 0===S||S;switch(this._initWebgl(a),this.fov=s,this.near=u,this.far=h,this.cameraPosition=E,this.cameraRotation=v,this.isAutoUpdateCameraPositionZ=void 0===t.cameraPosition,this.lightDirection=R,this.eyeDirection=b,this.ambientColor=p,"function"==typeof k&&this.addTick(k),this.onResize=I,this.isClear=_,this.clearedColor=this.isClear?g||[0,0,0,0]:null,Object.keys(A).forEach(function(e){r.createProgram(e,A[e])}),U.forEach(function(e){r.createEffect(e)}),this._initSize(),P.constructor.name){case"Array":P.forEach(function(e){r.createFramebuffer(e)});break;case"Object":Object.keys(P).forEach(function(e){var t=P[e],i=t.width,a=t.height;r.createFramebuffer(e,i,a)})}Object.keys(O).forEach(function(e){var t=O[e],i=t.width,a=t.height;r.createFramebufferFloat(e,i,a)}),"function"==typeof B&&B(this),X&&this.start()}return u(i,[{key:"_initWebgl",value:function(e){"string"==typeof e?this.canvas=document.querySelector(e):"object"===s(e)&&"HTMLCanvasElement"===e.constructor.name?this.canvas=e:(this.canvas=document.createElement("canvas"),this.canvas.style.display="block",this.canvas.style.width="100%",this.canvas.style.height="100%",document.body.appendChild(this.canvas));var t=this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl");t.depthFunc(t.LEQUAL)}},{key:"createProgram",value:function(e,r){this.programs[e]=new t.default(this,r)}},{key:"createEffect",value:function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);this.effects[e]=new r[t](this)}},{key:"createFramebuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.canvas.width,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.canvas.height,i=this.gl,a=i.createFramebuffer();i.bindFramebuffer(i.FRAMEBUFFER,a);var n=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,t,r),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,n);var s=i.createTexture(),o=++this.textureIndex;i.activeTexture(i["TEXTURE".concat(o)]),i.bindTexture(i.TEXTURE_2D,s),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,r,0,i.RGBA,i.UNSIGNED_BYTE,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,s,0),i.bindRenderbuffer(i.RENDERBUFFER,null),i.bindFramebuffer(i.FRAMEBUFFER,null),this.framebuffers[e]={framebuffer:a,textureIndex:o,depthRenderBuffer:n}}},{key:"resizeFramebuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.canvas.width,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.canvas.height,i=this.gl,a=this.framebuffers[e],n=a.framebuffer,s=a.textureIndex,o=a.depthRenderBuffer;a.isFloat||(i.bindFramebuffer(i.FRAMEBUFFER,n),i.bindRenderbuffer(i.RENDERBUFFER,o),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,t,r),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,o),i.activeTexture(i["TEXTURE".concat(s)]),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,r,0,i.RGBA,i.UNSIGNED_BYTE,null))}},{key:"createFramebufferFloat",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=this.gl,a=i.getExtension("OES_texture_float"),n=i.getExtension("OES_texture_half_float");if(a||n){var s=a?i.FLOAT:n.HALF_FLOAT_OES,o=i.createFramebuffer(),f=i.createTexture(),u=++this.textureIndex;i.bindFramebuffer(i.FRAMEBUFFER,o),i.activeTexture(i["TEXTURE".concat(u)]),i.bindTexture(i.TEXTURE_2D,f),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,r,0,i.RGBA,s,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,f,0),i.bindFramebuffer(i.FRAMEBUFFER,null),this.framebuffers[e]={framebuffer:o,textureIndex:u,isFloat:!0}}else console.error("float texture not support")}},{key:"bindFramebuffer",value:function(e){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e?this.framebuffers[e].framebuffer:null)}},{key:"unbindFramebuffer",value:function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)}},{key:"setSize",value:function(){var e=this,t=this.gl,r=this.canvas.clientWidth,i=this.canvas.clientHeight;this.canvas.width=r,this.canvas.height=i,this.aspect=r/i,t.viewport(0,0,r,i),Object.keys(this.programs).forEach(function(t){var a=e.programs[t];a.isAutoResolution&&(a.use(),a.uniforms.resolution=[r,i])}),Object.keys(this.effects).forEach(function(t){var a=e.effects[t];a.isAutoResolution&&(a.use(),a.uniforms.resolution=[r,i])}),Object.keys(this.framebuffers).forEach(function(t){e.resizeFramebuffer(t)}),this.updateCamera(),this.updateLight(),"function"==typeof this.onResize&&this.onResize(this)}},{key:"_initSize",value:function(){var e=this;this.setSize(),this._setSize=function(){e.setSize()},window.addEventListener("resize",this._setSize)}},{key:"updateCamera",value:function(){var t=this,r=this.fov,i=this.near,a=this.far,n=this.cameraPosition,s=this.cameraRotation,o=this.mMatrix,f=this.vMatrix,u=this.pMatrix,c=this.vpMatrix,h=this.mvpMatrix,l=this.invMatrix;this.isAutoUpdateCameraPositionZ&&(n[2]=Math.min(this.canvas.width,this.canvas.height)/2/Math.tan(this.fov/2*(Math.PI/180))),this.eyeDirection=n,e.default.identity(o),e.default.lookAt(n,[n[0],n[1],0],[0,1,0],f),e.default.perspective(r,this.aspect,i,a,u),e.default.multiply(u,f,c),s[0]=s[0]%(2*Math.PI),s[1]=s[1]%(2*Math.PI),e.default.rotate(o,s[0],[0,1,0],o),e.default.rotate(o,s[1],[-1,0,0],o),e.default.multiply(c,o,h),e.default.inverse(o,l),Object.keys(this.programs).forEach(function(e){var r=t.programs[e];r.hasCamera&&(r.use(),r.uniforms.mvpMatrix=h,r.uniforms.invMatrix=l)})}},{key:"updateLight",value:function(){var e=this,t=this.lightDirection,r=this.eyeDirection,i=this.ambientColor;Object.keys(this.programs).forEach(function(a){var n=e.programs[a];n.hasLight&&(n.use(),n.uniforms.lightDirection=t,n.uniforms.eyeDirection=r,n.uniforms.ambientColor=i)})}},{key:"addTick",value:function(e){this.ticks.push(e)}},{key:"start",value:function(){var e,t=this,r=this.gl;requestAnimationFrame(function(t){e=t});this.requestID=requestAnimationFrame(function i(a){var n=(a-e)/1e3;t.isClear&&(r.clearColor(t.clearedColor[0],t.clearedColor[1],t.clearedColor[2],t.clearedColor[3]),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT));for(var s=0;s<t.ticks.length;s++)t.ticks[s](t,n);t.requestID=requestAnimationFrame(i)})}},{key:"stop",value:function(){this.requestID&&(cancelAnimationFrame(this.requestID),this.requestID=null)}},{key:"destroy",value:function(){this.stop(),window.removeEventListener("resize",this._setSize)}}]),i}();exports.default=c;
},{"./minMatrix.js":"q3Og","./program":"XCtE","./effects":"avE6"}],"LVxz":[function(require,module,exports) {
"use strict";var i=e(require("../../src/index.js"));function e(i){return i&&i.__esModule?i:{default:i}}var n=window.innerHeight,r=window.innerHeight,t=n/2,o=r/2;new i.default({programs:{main:{vertexShaderId:"vs",fragmentShaderId:"fs",attributes:{position:{value:[-t,o,0,-t,-o,0,t,o,0,t,-o,0],size:3},uv:{value:[0,1,0,0,1,1,1,0],size:2}},uniforms:{resolution:[n,r],time:0}}},onResize:function(i){var e=window.innerHeight,n=window.innerHeight,r=e/2,t=n/2;i.programs.main.uniforms.resolution=[e,n],i.programs.main.updateAttribute("position",[-r,t,0,-r,-t,0,r,t,0,r,-t,0])},tick:function(i,e){i.programs.main.draw({time:e})}});
},{"../../src/index.js":"uBxZ"}]},{},["LVxz"], null)