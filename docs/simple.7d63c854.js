parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"q3Og":[function(require,module,exports) {
"use strict";function t(){this.create=function(){return new Float32Array(16)},this.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},this.multiply=function(t,r,n){var i=t[0],e=t[1],s=t[2],a=t[3],u=t[4],h=t[5],o=t[6],c=t[7],f=t[8],l=t[9],v=t[10],M=t[11],p=t[12],y=t[13],d=t[14],q=t[15],I=r[0],m=r[1],x=r[2],w=r[3],A=r[4],V=r[5],b=r[6],F=r[7],P=r[8],_=r[9],j=r[10],k=r[11],z=r[12],O=r[13],g=r[14],B=r[15];return n[0]=I*i+m*u+x*f+w*p,n[1]=I*e+m*h+x*l+w*y,n[2]=I*s+m*o+x*v+w*d,n[3]=I*a+m*c+x*M+w*q,n[4]=A*i+V*u+b*f+F*p,n[5]=A*e+V*h+b*l+F*y,n[6]=A*s+V*o+b*v+F*d,n[7]=A*a+V*c+b*M+F*q,n[8]=P*i+_*u+j*f+k*p,n[9]=P*e+_*h+j*l+k*y,n[10]=P*s+_*o+j*v+k*d,n[11]=P*a+_*c+j*M+k*q,n[12]=z*i+O*u+g*f+B*p,n[13]=z*e+O*h+g*l+B*y,n[14]=z*s+O*o+g*v+B*d,n[15]=z*a+O*c+g*M+B*q,n},this.scale=function(t,r,n){return n[0]=t[0]*r[0],n[1]=t[1]*r[0],n[2]=t[2]*r[0],n[3]=t[3]*r[0],n[4]=t[4]*r[1],n[5]=t[5]*r[1],n[6]=t[6]*r[1],n[7]=t[7]*r[1],n[8]=t[8]*r[2],n[9]=t[9]*r[2],n[10]=t[10]*r[2],n[11]=t[11]*r[2],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},this.translate=function(t,r,n){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[0]*r[0]+t[4]*r[1]+t[8]*r[2]+t[12],n[13]=t[1]*r[0]+t[5]*r[1]+t[9]*r[2]+t[13],n[14]=t[2]*r[0]+t[6]*r[1]+t[10]*r[2]+t[14],n[15]=t[3]*r[0]+t[7]*r[1]+t[11]*r[2]+t[15],n},this.rotate=function(t,r,n,i){var e=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);if(!e)return null;var s=n[0],a=n[1],u=n[2];1!=e&&(s*=e=1/e,a*=e,u*=e);var h=Math.sin(r),o=Math.cos(r),c=1-o,f=t[0],l=t[1],v=t[2],M=t[3],p=t[4],y=t[5],d=t[6],q=t[7],I=t[8],m=t[9],x=t[10],w=t[11],A=s*s*c+o,V=a*s*c+u*h,b=u*s*c-a*h,F=s*a*c-u*h,P=a*a*c+o,_=u*a*c+s*h,j=s*u*c+a*h,k=a*u*c-s*h,z=u*u*c+o;return r?t!=i&&(i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]):i=t,i[0]=f*A+p*V+I*b,i[1]=l*A+y*V+m*b,i[2]=v*A+d*V+x*b,i[3]=M*A+q*V+w*b,i[4]=f*F+p*P+I*_,i[5]=l*F+y*P+m*_,i[6]=v*F+d*P+x*_,i[7]=M*F+q*P+w*_,i[8]=f*j+p*k+I*z,i[9]=l*j+y*k+m*z,i[10]=v*j+d*k+x*z,i[11]=M*j+q*k+w*z,i},this.lookAt=function(t,r,n,i){var e,s,a,u,h,o,c,f,l,v,M=t[0],p=t[1],y=t[2],d=n[0],q=n[1],I=n[2],m=r[0],x=r[1],w=r[2];return M==m&&p==x&&y==w?this.identity(i):(c=M-r[0],f=p-r[1],l=y-r[2],e=q*(l*=v=1/Math.sqrt(c*c+f*f+l*l))-I*(f*=v),s=I*(c*=v)-d*l,a=d*f-q*c,(v=Math.sqrt(e*e+s*s+a*a))?(e*=v=1/v,s*=v,a*=v):(e=0,s=0,a=0),u=f*a-l*s,h=l*e-c*a,o=c*s-f*e,(v=Math.sqrt(u*u+h*h+o*o))?(u*=v=1/v,h*=v,o*=v):(u=0,h=0,o=0),i[0]=e,i[1]=u,i[2]=c,i[3]=0,i[4]=s,i[5]=h,i[6]=f,i[7]=0,i[8]=a,i[9]=o,i[10]=l,i[11]=0,i[12]=-(e*M+s*p+a*y),i[13]=-(u*M+h*p+o*y),i[14]=-(c*M+f*p+l*y),i[15]=1,i)},this.perspective=function(t,r,n,i,e){var s=n*Math.tan(t*Math.PI/360),a=2*(s*r),u=2*s,h=i-n;return e[0]=2*n/a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*n/u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=-(i+n)/h,e[11]=-1,e[12]=0,e[13]=0,e[14]=-i*n*2/h,e[15]=0,e},this.ortho=function(t,r,n,i,e,s,a){var u=r-t,h=n-i,o=s-e;return a[0]=2/u,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/h,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=-2/o,a[11]=0,a[12]=-(t+r)/u,a[13]=-(n+i)/h,a[14]=-(s+e)/o,a[15]=1,a},this.transpose=function(t,r){return r[0]=t[0],r[1]=t[4],r[2]=t[8],r[3]=t[12],r[4]=t[1],r[5]=t[5],r[6]=t[9],r[7]=t[13],r[8]=t[2],r[9]=t[6],r[10]=t[10],r[11]=t[14],r[12]=t[3],r[13]=t[7],r[14]=t[11],r[15]=t[15],r},this.inverse=function(t,r){var n=t[0],i=t[1],e=t[2],s=t[3],a=t[4],u=t[5],h=t[6],o=t[7],c=t[8],f=t[9],l=t[10],v=t[11],M=t[12],p=t[13],y=t[14],d=t[15],q=n*u-i*a,I=n*h-e*a,m=n*o-s*a,x=i*h-e*u,w=i*o-s*u,A=e*o-s*h,V=c*p-f*M,b=c*y-l*M,F=c*d-v*M,P=f*y-l*p,_=f*d-v*p,j=l*d-v*y,k=1/(q*j-I*_+m*P+x*F-w*b+A*V);return r[0]=(u*j-h*_+o*P)*k,r[1]=(-i*j+e*_-s*P)*k,r[2]=(p*A-y*w+d*x)*k,r[3]=(-f*A+l*w-v*x)*k,r[4]=(-a*j+h*F-o*b)*k,r[5]=(n*j-e*F+s*b)*k,r[6]=(-M*A+y*m-d*I)*k,r[7]=(c*A-l*m+v*I)*k,r[8]=(a*_-u*F+o*V)*k,r[9]=(-n*_+i*F-s*V)*k,r[10]=(M*w-p*m+d*q)*k,r[11]=(-c*w+f*m-v*q)*k,r[12]=(-a*P+u*b-h*V)*k,r[13]=(n*P-i*b+e*V)*k,r[14]=(-M*x+p*I-y*q)*k,r[15]=(c*x-f*I+l*q)*k,r}}function r(){this.create=function(){return new Float32Array(4)},this.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},this.inverse=function(t,r){return r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r[3]=t[3],r},this.normalize=function(t){var r=t[0],n=t[1],i=t[2],e=t[3],s=Math.sqrt(r*r+n*n+i*i+e*e);return 0===s?(t[0]=0,t[1]=0,t[2]=0,t[3]=0):(s=1/s,t[0]=r*s,t[1]=n*s,t[2]=i*s,t[3]=e*s),t},this.multiply=function(t,r,n){var i=t[0],e=t[1],s=t[2],a=t[3],u=r[0],h=r[1],o=r[2],c=r[3];return n[0]=i*c+a*u+e*o-s*h,n[1]=e*c+a*h+s*u-i*o,n[2]=s*c+a*o+i*h-e*u,n[3]=a*c-i*u-e*h-s*o,n},this.rotate=function(t,r,n){var i=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);if(!i)return null;var e=r[0],s=r[1],a=r[2];1!=i&&(e*=i=1/i,s*=i,a*=i);var u=Math.sin(.5*t);return n[0]=e*u,n[1]=s*u,n[2]=a*u,n[3]=Math.cos(.5*t),n},this.toVecIII=function(t,r,n){var i=this.create(),e=this.create(),s=this.create();return this.inverse(r,s),i[0]=t[0],i[1]=t[1],i[2]=t[2],this.multiply(s,i,e),this.multiply(e,r,s),n[0]=s[0],n[1]=s[1],n[2]=s[2],n},this.toMatIV=function(t,r){var n=t[0],i=t[1],e=t[2],s=t[3],a=n+n,u=i+i,h=e+e,o=n*a,c=n*u,f=n*h,l=i*u,v=i*h,M=e*h,p=s*a,y=s*u,d=s*h;return r[0]=1-(l+M),r[1]=c-d,r[2]=f+y,r[3]=0,r[4]=c+d,r[5]=1-(o+M),r[6]=v-p,r[7]=0,r[8]=f-y,r[9]=v+p,r[10]=1-(o+l),r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},this.slerp=function(t,r,n,i){var e=t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3],s=1-e*e;if(s<=0)i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3];else if(s=Math.sqrt(s),Math.abs(s)<1e-4)i[0]=.5*t[0]+.5*r[0],i[1]=.5*t[1]+.5*r[1],i[2]=.5*t[2]+.5*r[2],i[3]=.5*t[3]+.5*r[3];else{var a=Math.acos(e),u=a*n,h=Math.sin(a-u)/s,o=Math.sin(u)/s;i[0]=t[0]*h+r[0]*o,i[1]=t[1]*h+r[1]*o,i[2]=t[2]*h+r[2]*o,i[3]=t[3]*h+r[3]*o}return i}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.qtnIV=r,exports.default=void 0;var n=new t;exports.default=n;
},{}],"XCtE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./minMatrix.js"));function e(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function s(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o={none:"attribute vec2 aPosition;void main(){gl_Position=vec4(aPosition,0.,1.);}",plane:"\n    attribute vec3 aPosition;\n    attribute vec2 aUv;\n    uniform mat4 mvpMatrix;\n    varying vec2 vUv;\n    void main() {\n      vUv = aUv;\n      gl_Position = mvpMatrix * vec4(aPosition, 1.);\n    }\n  "},u={aPosition:{value:[-1,1,-1,-1,1,1,1,-1],size:2}};function h(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)/2,e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)/2;return{aPosition:{value:[-t,e,0,-t,-e,0,t,e,0,t,-e,0],size:3},aUv:{value:[0,1,0,0,1,1,1,0],size:2}}}var l=function(){function e(i,r){a(this,e),n(this,"attributes",{}),n(this,"uniforms",{}),n(this,"textureIndexes",{}),n(this,"mMatrix",t.default.identity(t.default.create())),n(this,"mvpMatrix",t.default.identity(t.default.create())),n(this,"invMatrix",t.default.identity(t.default.create())),n(this,"scaleValue",[1,1,1]),n(this,"rotateValue",[0,0,0]),n(this,"widthValue",1),n(this,"heightValue",1),n(this,"isUpdateMatrixUniform",!1);var s=i.gl;this.webgl=i;var l=r.shape,c=r.vertexShaderId,d=r.vertexShader,f=void 0===d?c?document.getElementById(c).textContent:l?o[l]:o.none:d,v=r.fragmentShaderId,b=r.fragmentShader,g=void 0===b?document.getElementById(v).textContent:b,m=r.attributes,E=r.instancedAttributes,A=r.uniforms,x=r.mode,T=r.drawType,y=void 0===T?"STATIC_DRAW":T,R=r.isTransparent,_=void 0!==R&&R,p=r.isAdditive,M=void 0!==p&&p,U=r.isFloats,w=void 0!==U&&U,S=r.isCulling,C=void 0===S||S,I=r.isDepth,L=void 0!==I&&I,P=r.clearedColor,k=!w,F=r.isAutoResolution,D=void 0===F?(!A||!A.resolution)&&k:F,N=r.hasCamera,B=void 0===N?k:N,O=r.hasLight,V=void 0===O?k:O,G=r.isClear,X=void 0===G?k:G,H=!(r.shape||r.vertexShaderId||r.vertexShader);if(this.mode=x,this.glMode=s[x||"TRIANGLE_STRIP"],this.drawType=y,this.isTransparent=_,this.isAdditive=M,this.isAutoResolution=D,this.hasCamera=B,this.hasLight=V,this.isClear=X,this.isCulling=C,this.isDepth=L,this.isInstanced=E,this.clearedColor=P||[0,0,0,0],this.createProgram(f,g),this.use(),H)this.createAttribute(u);else if(l)switch(l){case"plane":this.width=r.width,this.height=r.height,this.createAttribute(h())}else if(m&&(this.createAttribute(m),this.isInstanced)){if(this.instancedArraysExt=s.getExtension("ANGLE_instanced_arrays"),null==this.instancedArraysExt)return void alert("ANGLE_instanced_arrays not supported");this.createAttribute(E,!0)}A&&this.createUniform(A)}return s(e,[{key:"createProgram",value:function(t,e){var i=this.webgl.gl,a=i.createProgram();i.attachShader(a,this.createShader("VERTEX_SHADER",t)),i.attachShader(a,this.createShader("FRAGMENT_SHADER",e)),i.linkProgram(a),i.getProgramParameter(a,i.LINK_STATUS)?a?this.program=a:console.error('Failed to create program "'.concat(key,'".')):console.error(i.getProgramInfoLog(a))}},{key:"createShader",value:function(t,e){var i=this.webgl.gl,a=i.createShader(i[t]);if(i.shaderSource(a,e),i.compileShader(a),i.getShaderParameter(a,i.COMPILE_STATUS))return a;console.error(i.getShaderInfoLog(a))}},{key:"createAttribute",value:function(t,e){var i=this;Object.keys(t).forEach(function(a){var r=t[a],s=r.value,n=r.size,o=r.isIndices;i.addAttribute(a,s,n,o,e)})}},{key:"addAttribute",value:function(t,e,i,a,r){var s=this.webgl.gl,n=s.getAttribLocation(this.program,t),o=this.attributes[t]={location:n,size:i,isInstanced:r};if(a){var u=s.createBuffer();s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,u),s.bufferData(s.ELEMENT_ARRAY_BUFFER,new Int16Array(e),s[this.drawType]),o.ibo=u,this.indicesCount=this.indicesCount||e.length,this.glMode=s[this.mode||"TRIANGLES"]}else{var h=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,h),s.bufferData(s.ARRAY_BUFFER,new Float32Array(e),s[this.drawType]),o.vbo=h,r&&(this.instanceCount=this.instanceCount||e.length/i),this.count=this.count||e.length/i}}},{key:"setAttribute",value:function(t){var e=this.webgl.gl,i=this.attributes[t],a=i.location,r=i.size,s=i.vbo,n=i.ibo,o=i.isInstanced;n?e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n):(e.bindBuffer(e.ARRAY_BUFFER,s),e.enableVertexAttribArray(a),e.vertexAttribPointer(a,r,e.FLOAT,!1,0,0),o&&this.instancedArraysExt.vertexAttribDivisorANGLE(a,1))}},{key:"updateAttribute",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=this.webgl.gl;a.bindBuffer(a.ARRAY_BUFFER,this.attributes[t].vbo),a.bufferSubData(a.ARRAY_BUFFER,i,new Float32Array(e))}},{key:"scale",value:function(t,e,i){void 0!==t&&(this.scaleValue[0]=t),void 0!==e&&(this.scaleValue[1]=e),void 0!==i&&(this.scaleValue[2]=i),this.updateMatrix()}},{key:"rotateX",value:function(t){this.rotateValue[0]=t,this.updateMatrix()}},{key:"rotateY",value:function(t){this.rotateValue[1]=t,this.updateMatrix()}},{key:"updateMatrix",value:function(){this.isUpdateMatrixUniform=!0}},{key:"updateMatrixUniform",value:function(){t.default.identity(this.mMatrix),t.default.rotate(this.mMatrix,this.rotateValue[0],[1,0,0],this.mMatrix),t.default.rotate(this.mMatrix,this.rotateValue[1],[0,1,0],this.mMatrix),t.default.scale(this.mMatrix,[this.width*this.scaleValue[0],this.height*this.scaleValue[1],this.scaleValue[2]],this.mMatrix),t.default.multiply(this.webgl.vpMatrix,this.mMatrix,this.mvpMatrix),t.default.inverse(this.mMatrix,this.invMatrix),this.uniforms.mvpMatrix=this.mvpMatrix,this.uniforms.invMatrix=this.invMatrix}},{key:"width",get:function(){return this.widthValue},set:function(t){this.widthValue=t,this.scale()}},{key:"height",get:function(){return this.heightValue},set:function(t){this.heightValue=t,this.scale()}},{key:"createUniform",value:function(t){var e=this,i=Object.assign({},t);this.isAutoResolution&&!i.resolution&&(i.resolution=[1,1]),this.hasCamera&&(i.mvpMatrix=new Float32Array(16),i.invMatrix=new Float32Array(16)),this.hasLight&&(i.lightDirection||(i.lightDirection=[0,0,0]),i.eyeDirection||(i.eyeDirection=[0,0,0]),i.ambientColor||(i.ambientColor=[.1,.1,.1])),Object.keys(i).forEach(function(t){e.addUniform(t,i[t])})}},{key:"addUniform",value:function(t,e){var a,r,s=this,n=e,o=function(e,i){switch(e){case"image":a="image",r="1i",n=s.createTexture(t,i);break;case"framebuffer":a="framebuffer",r="1i",n=i;break;default:r=e,n=i}};switch(i(e)){case"number":r="1f";break;case"boolean":r="1i";break;case"string":o(e);break;case"object":switch(e.constructor.name){case"Float32Array":case"Array":switch(e.length){case 16:a="matrix",r="Matrix4fv";break;default:r="".concat(e.length,"fv")}break;case"HTMLImageElement":case"HTMLVideoElement":case"HTMLCanvasElement":r="1i",n=this.createTexture(t,e);break;case"Object":o(e.type,e.value)}}if(r){var u,h=this.webgl.gl.getUniformLocation(this.program,t),l="uniform".concat(r);switch(a){case"image":u=function(t){s.webgl.gl[l](h,s.textureIndexes[t]),n=t};break;case"framebuffer":u=function(t){s.webgl.gl[l](h,s.webgl.framebuffers[t].textureIndex),n=t};break;case"matrix":u=function(t){s.webgl.gl[l](h,!1,t),n=t};break;default:u=function(t){s.webgl.gl[l](h,t),n=t}}Object.defineProperty(this.uniforms,t,{get:function(){return n},set:u}),void 0!==n&&(this.uniforms[t]=n)}else console.error('Failed to add uniform "'.concat(t,'".'))}},{key:"createTexture",value:function(t,e){if(e){var i=this.webgl.gl,a=i.createTexture(),r=this.textureIndexes[t]=++this.webgl.textureIndex;return i.activeTexture(i["TEXTURE".concat(r)]),i.bindTexture(i.TEXTURE_2D,a),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e),r}}},{key:"updateTexture",value:function(t,e){var i=this.webgl.gl;i.activeTexture(i["TEXTURE".concat(this.textureIndexes[t])]),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e)}},{key:"use",value:function(){this.webgl.gl.useProgram(this.program)}},{key:"draw",value:function(t){var e=this.webgl.gl;if(this.use(),this.isClear&&(e.clearColor(this.clearedColor[0],this.clearedColor[1],this.clearedColor[2],this.clearedColor[3]),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)),this.isTransparent?(e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA)):this.isAdditive?(e.enable(e.BLEND),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE,e.ONE,e.ONE)):e.disable(e.BLEND),this.isCulling?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.isDepth?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),t)for(var i=Object.keys(t),a=0;a<i.length;a++){var r=i[a];this.uniforms[r]=t[r]}this.isUpdateMatrixUniform&&(this.updateMatrixUniform(),this.isUpdateMatrixUniform=!1);for(var s=Object.keys(this.attributes),n=0;n<s.length;n++)this.setAttribute(s[n]);this.isInstanced?this.indicesCount?this.instancedArraysExt.drawElementsInstancedANGLE(this.glMode,this.indicesCount,e.UNSIGNED_SHORT,0,this.instanceCount):this.instancedArraysExt.drawArraysInstancedANGLE(this.glMode,0,this.count,this.instanceCount):this.indicesCount?e.drawElements(this.glMode,this.indicesCount,e.UNSIGNED_SHORT,0):e.drawArrays(this.glMode,0,this.count)}}]),e}();exports.default=l;
},{"./minMatrix.js":"q3Og"}],"gGhW":[function(require,module,exports) {
module.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform vec2 resolution;\nuniform sampler2D texture;\n\nvoid main() {\n  gl_FragColor = texture2D(texture, gl_FragCoord.st / resolution);\n}\n";
},{}],"f5B0":[function(require,module,exports) {
module.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform vec2 resolution;\nuniform float radius;\nuniform bool isHorizontal;\n\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvoid main () {\n  vec2 uv = gl_FragCoord.xy / resolution;\n  vec2 direction = isHorizontal ? vec2(1., 0.) : vec2(0., 1.);\n  direction *= radius;\n  gl_FragColor = blur9(texture, uv, resolution, direction);\n}\n";
},{}],"aPJu":[function(require,module,exports) {
module.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform vec2 resolution;\nuniform sampler2D texture;\nuniform float threshold;\n\nvoid main() {\n  vec2 uv = gl_FragCoord.st / resolution;\n  vec4 color = texture2D(texture, uv);\n  if (color.a == 0. || length(color.rgb) < threshold * 1.732) discard;\n  gl_FragColor = color;\n}\n";
},{}],"iAUv":[function(require,module,exports) {
module.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform vec2 resolution;\nuniform sampler2D specular;\n\nconst float brightness = 0.7;\nconst float spread = 0.3;\n\nvoid main() {\n  vec2 uv = gl_FragCoord.st / resolution;\n  vec4 specularColor = texture2D(specular, uv);\n  specularColor.rgb = pow(specularColor.rgb, vec3(1. - brightness));\n  specularColor.a = pow(specularColor.a, 1. - spread);\n  gl_FragColor = specularColor;\n  // gl_FragColor = vec4(vec3(specularColor.a), 1.); // * debug\n  // gl_FragColor = vec4(texture2D(specular, uv).rgb, 1.); // * debug\n}\n";
},{}],"KuNS":[function(require,module,exports) {
module.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform vec2 resolution;\nuniform float strength;\nuniform vec2 center;\n\nhighp float random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt= dot(co.xy ,vec2(a,b));\n    highp float sn= mod(dt,3.14);\n    return fract(sin(sn) * c);\n}\n\nconst float nFrag = 1. / 30.;\n\nvoid main () {\n  vec2 tFrag = 1. / resolution;\n  vec3 destColor = vec3(0.);\n  float randomValue = random(vec2(12.9898, 78.233));\n  vec2 fc = gl_FragCoord.st;\n  vec2 fcc = fc - center;\n  float totalWeight = 0.;\n\n  for (float i = 0.; i <= 30.; i++) {\n    float percent = (i + randomValue) * nFrag;\n    float weight = percent - percent * percent;\n    vec2 t = fc - fcc * percent * strength * nFrag;\n    destColor += texture2D(texture, t * tFrag).rgb * weight;\n    totalWeight += weight;\n  }\n  gl_FragColor = vec4(destColor / totalWeight, 1.);\n}\n";
},{}],"avE6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GodrayLight=exports.Godray=exports.Zoomblur=exports.Bloom=exports.Specular=exports.Blur=void 0;var e=f(require("./program")),r=f(require("./shaders/template/texture.frag")),t=f(require("./shaders/postprocessing/blur.frag")),o=f(require("./shaders/postprocessing/specular.frag")),u=f(require("./shaders/postprocessing/bloom.frag")),a=f(require("./shaders/postprocessing/zoomblur.frag"));function f(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function i(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,r,t){return r&&i(e.prototype,r),t&&i(e,t),e}function c(e,r,t){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,r,t){var o=d(e,r);if(o){var u=Object.getOwnPropertyDescriptor(o,r);return u.get?u.get.call(t):u.value}})(e,r,t||e)}function d(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&null!==(e=v(e)););return e}function h(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&p(e,r)}function p(e,r){return(p=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}function b(e){var r=g();return function(){var t,o=v(e);if(r){var u=v(this).constructor;t=Reflect.construct(o,arguments,u)}else t=o.apply(this,arguments);return m(this,t)}}function m(e,r){if(r&&("object"===n(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(r){h(u,e.default);var o=b(u);function u(e){var r;s(this,u);var a={fragmentShader:t.default,uniforms:{texture:"framebuffer",radius:0,isHorizontal:!1},hasCamera:!1,hasLight:!1};return(r=o.call(this,e,a)).radius=.5,r}return l(u,[{key:"draw",value:function(e,r,t,o){this.use();for(var a=0;a<8;a++){this.webgl.bindFramebuffer(o&&a>=7?null:r),this.uniforms.texture=e,this.uniforms.radius=(7-a)*(void 0!==t?t:this.radius),this.uniforms.isHorizontal=a%2==0,c(v(u.prototype),"draw",this).call(this);var f=r;r=e,e=f}}}]),u}();exports.Blur=w;var x=function(r){h(u,e.default);var t=b(u);function u(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,u);var a=r.threshold,f=void 0===a?.5:a,n={fragmentShader:o.default,uniforms:{texture:"framebuffer",threshold:f},hasCamera:!1,hasLight:!1};return t.call(this,e,n)}return l(u,[{key:"draw",value:function(e,r,t){this.webgl.bindFramebuffer(r),this.use(),this.uniforms.texture=e,void 0!==t&&(this.uniforms.threshold=t),c(v(u.prototype),"draw",this).call(this)}}]),u}();exports.Specular=x;var S=function(t){h(a,e.default);var o=b(a);function a(t){var f;s(this,a),t.effects.bloomSpecular||(t.effects.bloomSpecular=new x(t,{threshold:.3})),t.effects.bloomBlur||(t.effects.bloomBlur=new w(t)),t.effects.bloomBase||(t.effects.bloomBase=new e.default(t,{fragmentShader:r.default,uniforms:{texture:"framebuffer"}}));var n={fragmentShader:u.default,uniforms:{specular:"framebuffer"},isAdditive:!0,hasCamera:!1,hasLight:!1,isClear:!1};return(f=o.call(this,t,n)).radius=.4,f}return l(a,[{key:"draw",value:function(e,r,t,o,u){this.webgl.effects.bloomSpecular.draw(e,r),this.webgl.effects.bloomBlur.draw(r,t,void 0!==o?o:this.radius),this.webgl.bindFramebuffer(u?null:t);var f=this.webgl.effects.bloomBase;f.use(),f.uniforms.texture=e,f.draw(),this.use(),this.uniforms.specular=r,c(v(a.prototype),"draw",this).call(this)}}]),a}();exports.Bloom=S;var B=function(r){h(o,e.default);var t=b(o);function o(e){s(this,o);var r={fragmentShader:a.default,uniforms:{texture:"framebuffer",strength:5,center:[e.canvas.width/2,e.canvas.height/2]}};return t.call(this,e,r)}return l(o,[{key:"draw",value:function(e,r,t,u,a){this.webgl.bindFramebuffer(a?null:r),this.use(),this.uniforms.texture=e,void 0!==t&&(this.uniforms.strength=t),void 0!==u&&(this.uniforms.center=u),c(v(o.prototype),"draw",this).call(this)}}]),o}();exports.Zoomblur=B;var O=function(t){h(u,e.default);var o=b(u);function u(t){var a;s(this,u),t.effects.godraySpecular||(t.effects.godraySpecular=new x(t,{threshold:.75})),t.effects.godrayZoomblur||(t.effects.godrayZoomblur=new B(t)),t.effects.godrayBlur||(t.effects.godrayBlur=new w(t)),t.effects.godrayBase||(t.effects.godrayBase=new e.default(t,{fragmentShader:r.default,uniforms:{texture:"framebuffer"}}));var f={fragmentShader:r.default,uniforms:{texture:"framebuffer"},isAdditive:!0,isClear:!1};return(a=o.call(this,t,f)).radius=.02,a}return l(u,[{key:"draw",value:function(e,r,t,o,a,f,n){this.webgl.effects.godraySpecular.draw(e,t),this.webgl.effects.godrayZoomblur.draw(t,r,o,a),this.webgl.effects.godrayBlur.draw(r,t,void 0!==f?f:this.radius),this.webgl.bindFramebuffer(n?null:t);var s=this.webgl.effects.godrayBase;s.use(),s.uniforms.texture=e,s.draw(),this.use(),this.uniforms.texture=r,c(v(u.prototype),"draw",this).call(this)}}]),u}();exports.Godray=O;var _=function(t){h(u,e.default);var o=b(u);function u(e){var t;s(this,u),e.effects.godraySpecular||(e.effects.godraySpecular=new x(e,{threshold:.75})),e.effects.godrayZoomblur||(e.effects.godrayZoomblur=new B(e)),e.effects.godrayBlur||(e.effects.godrayBlur=new w(e));var a={fragmentShader:r.default,uniforms:{texture:"framebuffer"},isAdditive:!0,isClear:!1};return(t=o.call(this,e,a)).radius=.02,t}return l(u,[{key:"draw",value:function(e,r,t,o,a,f,n){this.webgl.effects.godraySpecular.draw(e,t),this.webgl.effects.godrayZoomblur.draw(t,r,o,a),this.webgl.effects.godrayBlur.draw(r,t,void 0!==f?f:this.radius),this.webgl.bindFramebuffer(n?null:t),this.use(),this.uniforms.texture=r,c(v(u.prototype),"draw",this).call(this)}}]),u}();exports.GodrayLight=_;
},{"./program":"XCtE","./shaders/template/texture.frag":"gGhW","./shaders/postprocessing/blur.frag":"f5B0","./shaders/postprocessing/specular.frag":"aPJu","./shaders/postprocessing/bloom.frag":"iAUv","./shaders/postprocessing/zoomblur.frag":"KuNS"}],"uBxZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./minMatrix.js")),t=n(require("./program")),r=a(require("./effects"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,r&&r.set(e,a),a}function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}var c=function(){function i(t){var r=this;s(this,i),this.programs={},this.effects={},this.framebuffers={},this.textureIndex=-1,this.ticks=[],this.vMatrix=e.default.identity(e.default.create()),this.pMatrix=e.default.identity(e.default.create()),this.vpMatrix=e.default.identity(e.default.create());var a=t.canvas,n=t.fov,o=void 0===n?50:n,f=t.near,u=void 0===f?.1:f,c=t.far,h=void 0===c?2e3:c,l=t.cameraPosition,E=void 0===l?[0,0,30]:l,d=t.cameraRotation,v=void 0===d?[0,0]:d,R=t.lightDirection,m=void 0===R?[-1,1,1]:R,T=t.eyeDirection,b=void 0===T?E:T,F=t.ambientColor,p=void 0===F?[.1,.1,.1]:F,y=t.isClear,_=void 0===y||y,g=t.clearedColor,A=t.programs,D=void 0===A?{}:A,U=t.effects,x=void 0===U?[]:U,M=t.framebuffers,P=void 0===M?[]:M,C=t.framebufferFloats,k=void 0===C?{}:C,O=t.tick,B=t.onBefore,I=t.onResize,S=t.isAutoStart,X=void 0===S||S;switch(this._initWebgl(a),this.fov=o,this.near=u,this.far=h,this.cameraPosition=E,this.cameraRotation=v,this.isAutoUpdateCameraPositionZ=void 0===t.cameraPosition,this.lightDirection=m,this.eyeDirection=b,this.ambientColor=p,"function"==typeof O&&this.addTick(O),this.onResize=I,this.isClear=_,this.clearedColor=this.isClear?g||[0,0,0,0]:null,Object.keys(D).forEach(function(e){r.createProgram(e,D[e])}),x.forEach(function(e){r.createEffect(e)}),this._initSize(),P.constructor.name){case"Array":P.forEach(function(e){r.createFramebuffer(e)});break;case"Object":Object.keys(P).forEach(function(e){var t=P[e],i=t.width,a=t.height;r.createFramebuffer(e,i,a)})}Object.keys(k).forEach(function(e){var t=k[e],i=t.width,a=t.height;r.createFramebufferFloat(e,i,a)}),"function"==typeof B&&B(this),X&&this.start()}return u(i,[{key:"_initWebgl",value:function(e){"string"==typeof e?this.canvas=document.querySelector(e):"object"===o(e)&&"HTMLCanvasElement"===e.constructor.name?this.canvas=e:(this.canvas=document.createElement("canvas"),this.canvas.style.display="block",this.canvas.style.width="100%",this.canvas.style.height="100%",document.body.appendChild(this.canvas));var t=this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl");t.depthFunc(t.LEQUAL)}},{key:"createProgram",value:function(e,r){this.programs[e]=new t.default(this,r)}},{key:"createEffect",value:function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);this.effects[e]=new r[t](this)}},{key:"createFramebuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.canvas.width,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.canvas.height,i=this.gl,a=i.createFramebuffer();i.bindFramebuffer(i.FRAMEBUFFER,a);var n=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,t,r),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,n);var o=i.createTexture(),s=++this.textureIndex;i.activeTexture(i["TEXTURE".concat(s)]),i.bindTexture(i.TEXTURE_2D,o),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,r,0,i.RGBA,i.UNSIGNED_BYTE,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,o,0),i.bindRenderbuffer(i.RENDERBUFFER,null),i.bindFramebuffer(i.FRAMEBUFFER,null),this.framebuffers[e]={framebuffer:a,textureIndex:s,depthRenderBuffer:n}}},{key:"resizeFramebuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.canvas.width,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.canvas.height,i=this.gl,a=this.framebuffers[e],n=a.framebuffer,o=a.textureIndex,s=a.depthRenderBuffer;a.isFloat||(i.bindFramebuffer(i.FRAMEBUFFER,n),i.bindRenderbuffer(i.RENDERBUFFER,s),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,t,r),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,s),i.activeTexture(i["TEXTURE".concat(o)]),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,r,0,i.RGBA,i.UNSIGNED_BYTE,null))}},{key:"createFramebufferFloat",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=this.gl,a=i.getExtension("OES_texture_float"),n=i.getExtension("OES_texture_half_float");if(a||n){var o=a?i.FLOAT:n.HALF_FLOAT_OES,s=i.createFramebuffer(),f=i.createTexture(),u=++this.textureIndex;i.bindFramebuffer(i.FRAMEBUFFER,s),i.activeTexture(i["TEXTURE".concat(u)]),i.bindTexture(i.TEXTURE_2D,f),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,r,0,i.RGBA,o,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,f,0),i.bindFramebuffer(i.FRAMEBUFFER,null),this.framebuffers[e]={framebuffer:s,textureIndex:u,isFloat:!0}}else console.error("float texture not support")}},{key:"bindFramebuffer",value:function(e){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e?this.framebuffers[e].framebuffer:null)}},{key:"unbindFramebuffer",value:function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)}},{key:"setSize",value:function(){var e=this,t=this.gl,r=this.canvas.clientWidth,i=this.canvas.clientHeight;this.canvas.width=r,this.canvas.height=i,this.aspect=r/i,t.viewport(0,0,r,i),Object.keys(this.programs).forEach(function(t){var a=e.programs[t];a.isAutoResolution&&(a.use(),a.uniforms.resolution=[r,i])}),Object.keys(this.effects).forEach(function(t){var a=e.effects[t];a.isAutoResolution&&(a.use(),a.uniforms.resolution=[r,i])}),Object.keys(this.framebuffers).forEach(function(t){e.resizeFramebuffer(t)}),this.updateCamera(),this.updateLight(),"function"==typeof this.onResize&&this.onResize(this)}},{key:"_initSize",value:function(){var e=this;this.setSize(),this._setSize=function(){e.setSize()},window.addEventListener("resize",this._setSize)}},{key:"updateCamera",value:function(){var t=this,r=this.fov,i=this.near,a=this.far,n=this.cameraPosition,o=this.cameraRotation,s=this.vMatrix,f=this.pMatrix,u=this.vpMatrix;this.isAutoUpdateCameraPositionZ&&(n[2]=Math.min(this.canvas.width,this.canvas.height)/2/Math.tan(this.fov/2*(Math.PI/180))),this.eyeDirection=n,e.default.lookAt(n,[n[0],n[1],0],[0,1,0],s),e.default.perspective(r,this.aspect,i,a,f),o[0]=o[0]%(2*Math.PI),o[1]=o[1]%(2*Math.PI),e.default.rotate(s,o[0],[0,1,0],s),e.default.rotate(s,o[1],[-1,0,0],s),e.default.multiply(f,s,u),Object.keys(this.programs).forEach(function(e){var r=t.programs[e];r.hasCamera&&r.updateMatrix()})}},{key:"updateLight",value:function(){var e=this,t=this.lightDirection,r=this.eyeDirection,i=this.ambientColor;Object.keys(this.programs).forEach(function(a){var n=e.programs[a];n.hasLight&&(n.use(),n.uniforms.lightDirection=t,n.uniforms.eyeDirection=r,n.uniforms.ambientColor=i)})}},{key:"addTick",value:function(e){this.ticks.push(e)}},{key:"start",value:function(){var e,t=this,r=this.gl;requestAnimationFrame(function(t){e=t});this.requestID=requestAnimationFrame(function i(a){var n=(a-e)/1e3;t.isClear&&(r.clearColor(t.clearedColor[0],t.clearedColor[1],t.clearedColor[2],t.clearedColor[3]),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT));for(var o=0;o<t.ticks.length;o++)t.ticks[o](t,n);t.requestID=requestAnimationFrame(i)})}},{key:"stop",value:function(){this.requestID&&(cancelAnimationFrame(this.requestID),this.requestID=null)}},{key:"destroy",value:function(){this.stop(),window.removeEventListener("resize",this._setSize)}}]),i}();exports.default=c;
},{"./minMatrix.js":"q3Og","./program":"XCtE","./effects":"avE6"}],"btus":[function(require,module,exports) {
"use strict";var r=e(require("../../src/index.js"));function e(r){return r&&r.__esModule?r:{default:r}}new r.default({programs:{main:{fragmentShaderId:"fs",uniforms:{time:0}}},tick:function(r,e){r.programs.main.draw({time:e})}});
},{"../../src/index.js":"uBxZ"}]},{},["btus"], null)